#!/usr/bin/make -f
export DEB_BUILD_MAINT_OPTIONS = hardening=+all

%:
	dh $@ --with cargo

override_dh_auto_build:
	dh_auto_build
	cargo --config profile.release.strip=true build --release --features aws_lambda --manifest-path binaries/geph5-client/Cargo.toml

override_dh_auto_install:
	dh_auto_install
	dh_install target/release/geph5-client usr/bin/

override_dh_makeshlibs:
	dh_makeshlibs

override_dh_shlibdeps:
	dh_shlibdeps

override_dh_auto_clean:
	dh_auto_clean
	rm -rf target
